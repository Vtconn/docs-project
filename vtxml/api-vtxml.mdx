---
title: 'API do VTXML'
description: 'API para poder salvar NFe e CTe via REST'
---

A API está configurada para receber os dados pelo mesmo endpoint, a diferença será feita pelo campo `tipo` no body da requisição, e dependo do body será necessário enviar diferente json na requisição

Rota da API [POST]: http://191.252.197.120:8990/rest/restvtxml/saveDocument

## Salvar uma CTe

Para salvar uma CTe é necessário enviar as informações de cabeçalho e de um único item esse item é buscado através de uma função do ADVPL chamada `U_CP01005G("11", "PRODTRANSP")`

Dados necessários para enviar no body da requisição:

```json
{
  "tipo": "cte",
  "chaveNota": "text",
  "numeroNota": "text",
  "serieNota": "text",
  "dataNota": "dd/mm/yyyy",
  "tipoNota": "text",
  "tipoPE": "text",
  "naturezaOperacao": "text",
  "cnpj": "text",
  "razaoSocial": "text",
  "uf": "text",
  "valorTotal": 0000,
  "notaValida": "text",
  "status": "text",
  "codigoEmpresa": "text",
  "codigoFilial": "text",
  "chaveReferencia": "text",
  "dataImpressao": "dd/mm/yyyy",
  "horarioImpressao": "text",
  "usuarioImpressao": "text",
  "codigoAdd": "text",
  "valorFrete": 0000,
  "items": [
    {
      "cfop": 000000
    }
  ]
}
```

Caso salve a CTe com sucesso, é retornado o seguinte json:

```json
{
  "success": true,
  "message": "CTe salvo com sucesso, chave da nota: numero da chave"
}
```

Caso já tenha sido salvo o documento, será retoranado o status 400 e o seguinte json:

```json
{
  "errorCode": 400,
  "errorMessage": "CTE ja importado anteriormente"
}
```

Outros erros serão retornados o status 500

## Salvar uma NFe

Para salvar uma NFe é necessário enviar as informações de cabeçalho e

Dados necessários para enviar no body da requisição:

```json
{
  "tipo": "nfe",
  "chaveNota": "text",
}
```

Caso salve a NFe com sucesso, é retornado o seguinte json:

```json
{
  "success": true,
  "message": "NFe salvo com sucesso, chave da nota: numero da chave"
}
```

Caso já tenha sido salvo o documento, será retoranado o status 400 e o seguinte json:

```json
{
  "errorCode": 400,
  "errorMessage": "NFe ja importado anteriormente"
}
```

Outros erros serão retornados o status 500
